<!DOCTYPE html>
<html>
<head>
  <title>ALEX™ Deal Analyzer</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<nav>
  <a href="/">Home</a>
  <a href="/system.html">System</a>
  <a href="/pricing.html">Pricing</a>
  <a href="/contact.html">Contact</a>
</nav>

<div class="container">
  <h1>ALEX™ Deal Analyzer</h1>

  <div class="card">
    <input id="address" placeholder="Property Address" />
    <input id="rate" placeholder="Interest Rate (%)" />
    <button class="button" onclick="analyze()">Analyze Deal</button>

    <div id="result" class="result"></div>
  </div>
</div>

<script>
async function analyze() {
  const address = document.getElementById("address").value;
  const interestRate = Number(document.getElementById("rate").value);

  const res = await fetch("/api/deal-grade", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ address, interestRate })
  });

  const data = await res.json();

  if (data.error) {
    document.getElementById("result").innerHTML =
      "<p style='color:red'>" + data.error + "</p>";
    return;
  }

  document.getElementById("result").innerHTML = `
    <hr>
    <p><strong>Address:</strong> ${data.address}</p>
    <p><strong>ZIP:</strong> ${data.zip}</p>
    <p><strong>Bedrooms:</strong> ${data.bedrooms}</p>
    <p><strong>HUD Rent:</strong> $${data.hudRent}</p>
    <p><strong>ARV:</strong> $${data.arv}</p>
    <hr>
    <p><strong>Annual Rent:</strong> $${data.dealMetrics.annualRent}</p>
    <p><strong>Annual Expenses:</strong> $${data.dealMetrics.annualExpenses}</p>
    <p><strong>NOI:</strong> $${data.dealMetrics.annualNOI}</p>
    <p><strong>Mortgage:</strong> $${data.dealMetrics.mortgage}</p>
    <p><strong>Cash Flow:</strong> $${data.dealMetrics.annualCashFlow}</p>
    <p><strong>Cap Rate:</strong> ${data.dealMetrics.capRatePct}%</p>
    <p><strong>DSCR:</strong> ${data.dealMetrics.dscr}</p>
    <h2>Deal Grade: ${data.dealScore}</h2>
  `;
}
</script>

</body>
</html>