<!DOCTYPE html>
<html>
<head>
  <title>ALEX™ Deal Analyzer</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<nav class="nav">
  <a href="/">Home</a>
  <a href="/system.html">System</a>
  <a href="/pricing.html">Pricing</a>
  <a href="/contact.html">Contact</a>
</nav>

<div class="container">
  <h1>ALEX™ Deal Analyzer</h1>

  <input id="address" placeholder="Property Address" />
  <input id="rate" placeholder="Interest Rate (%)" />
  <button onclick="analyze()">Analyze Deal</button>

  <div id="results" class="results"></div>
</div>

<script>
async function analyze() {
  const address = document.getElementById("address").value;
  const interestRate = Number(document.getElementById("rate").value);

  const res = await fetch("/api/deal-grade", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ address, interestRate })
  });

  const data = await res.json();
  const r = document.getElementById("results");

  if (data.error) {
    r.innerHTML = `<p class="error">${data.error}</p>`;
    return;
  }

  r.innerHTML = `
    <h3>Results</h3>
    <p><strong>Address:</strong> ${data.address}</p>
    <p><strong>ZIP:</strong> ${data.zip}</p>
    <p><strong>Bedrooms:</strong> ${data.bedrooms}</p>
    <p><strong>HUD Rent:</strong> $${data.hudRent}</p>
    <p><strong>ARV:</strong> $${data.arv}</p>
    <hr>
    <p><strong>Annual Rent:</strong> $${data.dealMetrics.annualRent}</p>